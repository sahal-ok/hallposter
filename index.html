<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Auditorium Booking Calendar</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
* {
    box-sizing: border-box;
    font-family: "Segoe UI", sans-serif;
}

body {
    margin: 0;
    min-height: 100vh;
    background:#000;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #fff;
}

/* MAIN CARD */
#calendar-card {
    width: 95%;
    max-width: 1100px;
    padding: 24px;
    border-radius: 20px;
    background: #111;
    border: 1px solid rgba(255,255,255,0.3);
    box-shadow: 0 25px 50px rgba(0,0,0,0.6);
    position: relative;
    background-size: cover;
    background-position: center;
}

/* HEADER */
.header input {
    font-size: 32px;
    width: 100%;
    text-align: center;
    background: transparent;
    border: none;
    color: #fff;
    font-weight: 600;
    outline: none;
}

/* CONTROLS */
.controls {
    display: flex;
    justify-content: space-between;
    gap: 10px;
    margin: 14px 0;
    flex-wrap: wrap;
}

.controls button,
.controls input {
    padding: 8px 14px;
    border-radius: 8px;
    border: none;
    background: rgba(255,255,255,0.25);
    color: #fff;
    cursor: pointer;
}

#monthYear {
    text-align: center;
    font-size: 22px;
    margin-bottom: 12px;
}

/* CALENDAR */
.calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 10px;
    border: 1.5px solid rgba(255,255,255,0.7);
    padding: 10px;
    border-radius: 14px;
}

.day-name {
    text-align: center;
    font-weight: 600;
    opacity: 0.85;
}

.day {
    height: 80px;
    border: 1px solid rgba(255,255,255,0.25);
    border-radius: 14px;
    background: rgba(255,255,255,0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 18px;
    position: relative;
    transition: 0.2s;
}

.day:hover {
    transform: scale(1.05);
}

.booked {
   background: rgba(80, 255, 240, 0.12);

}

.booked::after {
    content: "BOOKED";
    position: absolute;
    bottom: 6px;
    font-size: 10px;
    font-weight: bold;
}

/* FOOTER */
.footer {
    margin-top: 16px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.footer a,
.footer input {
    padding: 10px 16px;
    border-radius: 30px;
    background: rgba(0,0,0,0.6);
    color: #fff;
    border: none;
    outline: none;
    text-decoration: none;
}
/* =======================
   MOBILE RESPONSIVE FIXES
   ======================= */
@media (max-width: 768px) {

    body {
        align-items: flex-start;
        padding: 10px;
    }

    #calendar-card {
        padding: 14px;
        border-radius: 14px;
    }

    /* Auditorium name */
    .header input {
        font-size: 22px;
    }

    /* Controls stack */
    .controls {
        flex-direction: column;
        align-items: stretch;
        gap: 8px;
    }

    .controls > div {
        display: flex;
        justify-content: space-between;
        gap: 6px;
    }

    .controls button,
    .controls input {
        font-size: 14px;
        padding: 8px 10px;
        flex: 1;
    }

    /* Month title */
    #monthYear {
        font-size: 18px;
    }

    /* Calendar tighter */
    .calendar {
        gap: 6px;
        padding: 6px;
    }

    .day-name {
        font-size: 12px;
    }

    .day {
        height: 55px;
        font-size: 14px;
        border-radius: 10px;
    }

    .booked::after {
        font-size: 9px;
        bottom: 4px;
    }

    /* Footer buttons */
    .footer {
        flex-direction: column;
        gap: 8px;
    }

    .footer a,
    .footer input {
        width: 100%;
        text-align: center;
        font-size: 14px;
    }
}

</style>
</head>

<body>

<div id="calendar-card">

    <div class="header">
        <input id="auditoriumName" placeholder="Auditorium Name">
    </div>

    <div class="controls">
        <div>
            <button onclick="changeMonth(-1)">â—€</button>
            <button onclick="changeMonth(1)">â–¶</button>
        </div>

        <input type="file" accept="image/*" onchange="setBackground(event)">

        <div>
            <button onclick="downloadImage()">Download</button>
            <button onclick="savePreset()">Save</button>
            <button onclick="loadPreset()">Load</button>
        </div>
    </div>

    <div id="monthYear"></div>
    <div class="calendar" id="calendar"></div>

    <div class="footer">
        <a href="#" id="bookNow">ðŸ“… Book Now</a>
        <input type="text" id="phoneInput" placeholder="+91 1234567890">
    </div>

</div>

<script>
let currentDate = new Date();
let bookedDates = [];

const STORAGE_KEY = "calendarPreset";

/* -------- INIT -------- */
loadPreset(true);
renderCalendar();

/* -------- RENDER -------- */
function renderCalendar() {
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    const calendar = document.getElementById("calendar");
    calendar.innerHTML = "";

    ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].forEach(d => {
        const div = document.createElement("div");
        div.className = "day-name";
        div.innerText = d;
        calendar.appendChild(div);
    });

    document.getElementById("monthYear").innerText =
        currentDate.toLocaleString("default", { month: "long", year: "numeric" });

    for (let i = 0; i < firstDay; i++) {
        calendar.appendChild(document.createElement("div"));
    }

    for (let day = 1; day <= daysInMonth; day++) {
        const div = document.createElement("div");
        div.className = "day";

        const key = `${year}-${month + 1}-${day}`;
        if (bookedDates.includes(key)) div.classList.add("booked");

        div.innerText = day;
        div.onclick = () => toggleDate(key, div);
        calendar.appendChild(div);
    }
}

/* -------- TOGGLE DATE -------- */
function toggleDate(key, el) {
    if (bookedDates.includes(key)) {
        bookedDates = bookedDates.filter(d => d !== key);
        el.classList.remove("booked");
    } else {
        bookedDates.push(key);
        el.classList.add("booked");
    }
    autoSave();
}

/* -------- MONTH CHANGE -------- */
function changeMonth(n) {
    currentDate.setMonth(currentDate.getMonth() + n);
    autoSave();
    renderCalendar();
}

/* -------- BACKGROUND -------- */
function setBackground(e) {
    const reader = new FileReader();
    reader.onload = () => {
        document.getElementById("calendar-card").style.backgroundImage =
            `url(${reader.result})`;
        autoSave(reader.result);
    };
    reader.readAsDataURL(e.target.files[0]);
}

/* -------- AUTO SAVE -------- */
function autoSave(bgOverride = null) {
    const preset = {
        name: document.getElementById("auditoriumName").value,
        phone: document.getElementById("phoneInput").value,
        bookedDates,
        month: currentDate.getMonth(),
        year: currentDate.getFullYear(),
        bgImage: bgOverride || document.getElementById("calendar-card").style.backgroundImage
    };
    localStorage.setItem(STORAGE_KEY, JSON.stringify(preset));
}

/* -------- MANUAL SAVE -------- */
function savePreset() {
    autoSave();
    alert("Saved successfully");
}

/* -------- LOAD -------- */
function loadPreset(silent = false) {
    const preset = JSON.parse(localStorage.getItem(STORAGE_KEY));
    if (!preset) return silent ? null : alert("No saved data");

    document.getElementById("auditoriumName").value = preset.name || "";
    document.getElementById("phoneInput").value = preset.phone || "";
    bookedDates = preset.bookedDates || [];
    currentDate = new Date(preset.year, preset.month);

    if (preset.bgImage) {
        document.getElementById("calendar-card").style.backgroundImage =
            preset.bgImage;
    }
}

/* -------- DOWNLOAD -------- */
function downloadImage() {
    html2canvas(document.getElementById("calendar-card")).then(canvas => {
        const a = document.createElement("a");
        a.href = canvas.toDataURL();
        a.download = "calendar.png";
        a.click();
    });
}
</script>


</body>
</html>
